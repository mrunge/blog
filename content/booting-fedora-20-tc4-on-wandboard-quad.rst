Booting Fedora 20 TC4 on Wandboard Quad
#######################################
:date: 2013-09-05 21:18
:author: mrunge
:category: Fedora
:slug: booting-fedora-20-tc4-on-wandboard-quad

| Lately, I got a shiny new `Wandboard`_ Quad into my fingers, and it'sÂ 
"enabled hardware" on Fedora 20. I took a TC4 test build
|  from http://koji.fedoraproject.org/koji/taskinfo?taskID=5896895:

::

    wget http://kojipkgs.fedoraproject.org//work/tasks/6895/5896895/Fedora-Minimal-armhfp-20-Alpha-TC4-sda.raw.xz
    xzcat Fedora-Minimal-armhfp-20-Alpha-TC4-sda.raw.xz | sudo dd of=/dev/mmcblk0 bs=4M
    sudo sync

Sadly, it's not bootable by default, we need to write a bootblock. From
the package uboot-wandboard\_quad, wel'l take the file

::

    /usr/share/uboot-imx6quad/u-boot.imx

and dd it to the sdcard:

::

    sudo dd if=u-boot.imx of=/dev/mmcblk0 bs=1k seek=1
    sudo sync

Currently, the image creation has a known bug: extlinux.conf is missing,
though we create one by hand and write it to
/boot/extlinux/extlinux.conf on the sdcard:

::

    # extlinux.conf generated by anaconda

    ui menu.c32

    menu autoboot Welcome to Fedora. Automatic boot in # second{,s}. Press a key for options.
    menu title Fedora Boot Options.
    menu hidden

    timeout 60
    #totaltimeout 9000 

    label Fedora (3.11.0-3.fc20.armv7hl) 20 (Rawhide)
       kernel /vmlinuz-3.11.0-3.fc20.armv7hl
       fdt /dtb-3.11.0-3.fc20.armv7hl/imx6q-wandboard.dtb
       append console=ttymxc0,115200 root=UUID=bb2f901b-dfe1-4344-81bf-ae7fb675cead ro rhgb quiet LANG=en_US.UTF-8
       initrd /initramfs-3.11.0-3.fc20.armv7hl.img

Finally, we'd need to update the UUID of the root partition:<

::

    sudo blkid -oexport -sUUID /dev/mmcblk0p3

will report the name of the partition and the UUID, which we'd need to
insert to the kernel append line in extlinux.conf

| Insert the SDCard to the card reader directly below the heat sink,
connect your serial console, and wait.
|  Probably, you'd need to type boot, when you're dropped to the uboot
prompt.

.. _Wandboard: http://wandboard.org
